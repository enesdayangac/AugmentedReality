hello world
F keeping 6128 / 21559
21559 matches before, 6128 new matches after Fundamental Matrix
=========================== Baseline triangulation ===========================
Find camera matrices...
before fundamentalMat 6128
F keeping 5560 / 6128
6128 matches before, 5560 new matches after Fundamental Matrix
after fundamentalMat 5560
----------------------- SVD ------------------------
U:
[-0.06744558013447743, 0.4190808121091302, -0.9054404268875317;
  0.9875602309315736, 0.1572392263442729, -0.0007848445905955855;
  -0.1420418389162174, 0.8942298913705616, 0.42447263442617]
W:
[13.60576323788914; 11.42632117802803; 7.355531760200531e-010]
Vt:
[0.6450903756238857, 0.1717700647335652, 0.74454916032379;
  0.09585249455680074, -0.9848994353294538, 0.1441714312024445;
  0.7580703836482945, -0.02163670837141153, -0.6518137358833257]
----------------------------------------------------
det(R) == -1 [-1]: flip E's sign
----------------------- SVD ------------------------
U:
[0.06744558013447743, -0.4190808121091302, 0.9054404268875317;
  -0.9875602309315736, -0.1572392263442729, 0.0007848445905955855;
  0.1420418389162174, -0.8942298913705616, -0.42447263442617]
W:
[13.60576323788914; 11.42632117802803; 7.355531760200531e-010]
Vt:
[0.6450903756238857, 0.1717700647335652, 0.74454916032379;
  0.09585249455680074, -0.9848994353294538, 0.1441714312024445;
  0.7580703836482945, -0.02163670837141153, -0.6518137358833257]
----------------------------------------------------
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.4095777461783445, -0.02514917489891801, -0.9119284998492869, 0.9054404268875317;
  -0.006178432485457542, -0.9996734873396669, 0.02479406546274688, 0.0007848445905955855;
  -0.9122542939375458, -0.004520808782946813, -0.4095993963380047, -0.42447263442617]
test branch 1
Triangulating...Done. (5560points, 0.479175s, mean reproj err = 17.6928)
Triangulating...Done. (5560points, 0.473768s, mean reproj err = 14.6016)
0/5560 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.4095777461783445, -0.02514917489891801, -0.9119284998492869, -0.9054404268875317;
  -0.006178432485457542, -0.9996734873396669, 0.02479406546274688, -0.0007848445905955855;
  -0.9122542939375458, -0.004520808782946813, -0.4095993963380047, 0.42447263442617]
test branch 2
Triangulating...Done. (5560points, 0.454634s, mean reproj err = 17.6928)
Triangulating...Done. (5560points, 0.454185s, mean reproj err = 14.6016)
5560/5560 = 100% are in front of camera
0/5560 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.9631973973842689, -0.01403232602958576, -0.2684285146894236, 0.9054404268875317;
  0.00736836736525171, 0.9996395244326197, -0.02581721043211473, 0.0007848445905955855;
  0.2686940282822479, 0.02288918998839445, 0.9629535835891228, -0.42447263442617]
test branch 3
Triangulating...Done. (5560points, 0.455394s, mean reproj err = 17.9233)
Triangulating...Done. (5560points, 0.454928s, mean reproj err = 14.7414)
5553/5560 = 99.8741% are in front of camera
5553/5560 = 99.8741% are in front of camera
Done. (2.94626s)
begin triangulation
p query index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
p train index 0
[0.9631973973842689, -0.01403232602958576, -0.2684285146894236, 0.9054404268875317;
  0.00736836736525171, 0.9996395244326197, -0.02581721043211473, 0.0007848445905955855;
  0.2686940282822479, 0.02288918998839445, 0.9629535835891228, -0.42447263442617]
getalign
triangulate points
Triangulating...Done. (5560points, 0.475371s, mean reproj err = 17.9233)
triangulation reproj error 17.9233
test triangulate
5553/5560 = 99.8741% are in front of camera
5553/5560 = 99.8741% are in front of camera
filtered out 2928 high-error points
489/2632 points were found in other views, adding 2143 new
 after 2143
after init map size: 2143
F keeping 11938 / 22600
22600 matches before, 11938 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22600
train frame keypoints: 21559
match size: 11938-----------------------------------------------------------------
found 2573 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 2573
2d point: 2573
inliers size: 1645
projected point: 2573
--------------------------------------------------------------------------
(1645/2573)
found t = [0.5387721022079867; 0.004405748557273936; -0.2026385150413348]
R = 
[0.9813852833054795, -0.02927615596798454, -0.1898047217620313;
  0.0236959229294462, 0.9992195591160076, -0.03160341621617954;
  0.1905818169394594, 0.02651752951821827, 0.9813130956429272]
frame pose [0.9813852833054795, -0.02927615596798454, -0.1898047217620313, 0.5387721022079867;
  0.0236959229294462, 0.9992195591160076, -0.03160341621617954, 0.004405748557273936;
  0.1905818169394594, 0.02651752951821827, 0.9813130956429272, -0.2026385150413348]
next to triangulate ,inliers size: 1645
begin triangulation
p query index 2
[0.9813852833054795, -0.02927615596798454, -0.1898047217620313, 0.5387721022079867;
  0.0236959229294462, 0.9992195591160076, -0.03160341621617954, 0.004405748557273936;
  0.1905818169394594, 0.02651752951821827, 0.9813130956429272, -0.2026385150413348]
p train index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
getalign
triangulate points
Triangulating...Done. (1645points, 0.139569s, mean reproj err = 10.8152)
triangulation reproj error 10.8152
test triangulate
1645/1645 = 100% are in front of camera
1645/1645 = 100% are in front of camera
filtered out 29 high-error points
223/1616 points were found in other views, adding 1393 new
before triangulation: 3536 after 3536
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 1616 K (measurements) = 3232
intrinsic before bundle = [ 1024 0 512 
0 1024 384 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 3232 valid 2D measurements.
mean reprojection error (in pixels): 11.2217
K0 = [ 1 0 0.5 
0 1 0.375 
0 0 1 ]
optimizer status = 0
refined K = [ 1.08243 0 0.542207 
0 1.08243 0.372864 
0 0 1 ]
Knew = [ 1108.41 0 555.22 
0 1108.41 381.813 
0 0 1 ]
mean reprojection error (in pixels): 0.330003
use new K 
[1108.408020457031, 0, 555.2201250537911;
  0, 1108.408020457031, 381.8129897537807;
  0, 0, 1]
after 2 map size: 3536
F keeping 12911 / 22170
22170 matches before, 12911 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22170
train frame keypoints: 22600
match size: 12911-----------------------------------------------------------------
found 1518 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 1518
2d point: 1518
inliers size: 349
projected point: 1518
--------------------------------------------------------------------------
(349/1518)
found t = [-0.0364997200502846; -0.01635045839984961; -0.252472726441316]
R = 
[0.9993468892122114, -0.0104223236536932, -0.03460014727618498;
  0.01115537451252109, 0.9997159483386963, 0.02106134508398438;
  0.03437081089182241, -0.02143356729335893, 0.9991792879917596]
frame pose [0.9993468892122114, -0.0104223236536932, -0.03460014727618498, -0.0364997200502846;
  0.01115537451252109, 0.9997159483386963, 0.02106134508398438, -0.01635045839984961;
  0.03437081089182241, -0.02143356729335893, 0.9991792879917596, -0.252472726441316]
next to triangulate ,inliers size: 349
begin triangulation
p query index 3
[0.9993468892122114, -0.0104223236536932, -0.03460014727618498, -0.0364997200502846;
  0.01115537451252109, 0.9997159483386963, 0.02106134508398438, -0.01635045839984961;
  0.03437081089182241, -0.02143356729335893, 0.9991792879917596, -0.252472726441316]
p train index 2
[0.9959408060684138, -0.03353774176115623, -0.08352922054801888, 0.1012488810750574;
  0.034173493015588, 0.9993967297992911, 0.006192644152211138, -0.02448918165363255;
  0.08327114255797841, -0.009021992243643216, 0.9964860864422762, -0.2930428292759099]
getalign
triangulate points
Triangulating...Done. (349points, 0.0305065s, mean reproj err = 0.317616)
triangulation reproj error 0.317616
test triangulate
349/349 = 100% are in front of camera
349/349 = 100% are in front of camera
filtered out 0 high-error points
177/349 points were found in other views, adding 172 new
before triangulation: 3708 after 3708
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 349 K (measurements) = 698
intrinsic before bundle = [ 1108.41 0 555.22 
0 1108.41 381.813 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 698 valid 2D measurements.
mean reprojection error (in pixels): 0.648754
K0 = [ 1 0 0.500917 
0 1 0.34447 
0 0 1 ]
optimizer status = 0
refined K = [ 0.999308 0 0.450222 
0 0.999308 0.322245 
0 0 1 ]
Knew = [ 1107.64 0 499.03 
0 1107.64 357.179 
0 0 1 ]
mean reprojection error (in pixels): 0.283894
use new K 
[1107.641046728233, 0, 499.0298689947848;
  0, 1107.641046728233, 357.1785591233904;
  0, 0, 1]
after 3 map size: 3708
F keeping 11396 / 20621
20621 matches before, 11396 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 20621
train frame keypoints: 22170
match size: 11396-----------------------------------------------------------------
found 309 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 309
2d point: 309
inliers size: 47
projected point: 309
--------------------------------------------------------------------------
(47/309)
not enough inliers to consider a good pose (47/309)
lost a frame
after 4 map size: 3708
F keeping 10657 / 22138
22138 matches before, 10657 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22138
train frame keypoints: 22170
match size: 10657-----------------------------------------------------------------
found 285 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 285
2d point: 285
inliers size: 255
projected point: 285
--------------------------------------------------------------------------
(255/285)
found t = [0.3921774726170164; 0.04080648554758209; -0.4362592760500097]
R = 
[0.9888185118144938, -0.05613535346873504, -0.1381548869345924;
  0.06090051509484726, 0.9976775539687992, 0.0305061562314245;
  0.1361215558027167, -0.03857875578312468, 0.9899407061274296]
frame pose [0.9888185118144938, -0.05613535346873504, -0.1381548869345924, 0.3921774726170164;
  0.06090051509484726, 0.9976775539687992, 0.0305061562314245, 0.04080648554758209;
  0.1361215558027167, -0.03857875578312468, 0.9899407061274296, -0.4362592760500097]
next to triangulate ,inliers size: 255
begin triangulation
p query index 4
[0.9888185118144938, -0.05613535346873504, -0.1381548869345924, 0.3921774726170164;
  0.06090051509484726, 0.9976775539687992, 0.0305061562314245, 0.04080648554758209;
  0.1361215558027167, -0.03857875578312468, 0.9899407061274296, -0.4362592760500097]
p train index 3
[0.999026448990329, -0.01066988728618693, -0.0428054637058611, 0.1308178520753782;
  0.01183447712029721, 0.9995641329811749, 0.02704605717809173, 0.04622657869376262;
  0.0424982278343802, -0.0275263067426691, 0.9987172788472452, -0.3674288401610131]
getalign
triangulate points
Triangulating...Done. (255points, 0.0215951s, mean reproj err = 0.637088)
triangulation reproj error 0.637088
test triangulate
255/255 = 100% are in front of camera
255/255 = 100% are in front of camera
filtered out 0 high-error points
42/255 points were found in other views, adding 213 new
before triangulation: 3921 after 3921
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 255 K (measurements) = 510
intrinsic before bundle = [ 1107.64 0 499.03 
0 1107.64 357.179 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 510 valid 2D measurements.
mean reprojection error (in pixels): 0.813157
K0 = [ 1 0 0.450534 
0 1 0.322468 
0 0 1 ]
optimizer status = 0
refined K = [ 0.885525 0 0.465854 
0 0.885525 0.308717 
0 0 1 ]
Knew = [ 980.844 0 515.999 
0 980.844 341.947 
0 0 1 ]
mean reprojection error (in pixels): 0.514989
use new K 
[980.844137151994, 0, 515.9989995458634;
  0, 980.844137151994, 341.9471392281893;
  0, 0, 1]
after 5 map size: 3921
F keeping 14729 / 22551
22551 matches before, 14729 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22551
train frame keypoints: 22138
match size: 14729-----------------------------------------------------------------
found 244 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 244
2d point: 244
inliers size: 192
projected point: 244
--------------------------------------------------------------------------
(192/244)
found t = [0.7443770433845578; -0.1306064984166065; -0.2690766692046189]
R = 
[0.9672285509917094, -0.06585872073353065, -0.245217371019716;
  0.08841499816879984, 0.9926918907889014, 0.0821315899077021;
  0.2380162142487132, -0.1011209121067381, 0.965982837782024]
frame pose [0.9672285509917094, -0.06585872073353065, -0.245217371019716, 0.7443770433845578;
  0.08841499816879984, 0.9926918907889014, 0.0821315899077021, -0.1306064984166065;
  0.2380162142487132, -0.1011209121067381, 0.965982837782024, -0.2690766692046189]
next to triangulate ,inliers size: 192
begin triangulation
p query index 5
[0.9672285509917094, -0.06585872073353065, -0.245217371019716, 0.7443770433845578;
  0.08841499816879984, 0.9926918907889014, 0.0821315899077021, -0.1306064984166065;
  0.2380162142487132, -0.1011209121067381, 0.965982837782024, -0.2690766692046189]
p train index 4
[0.9734586846237523, -0.02569279456373403, -0.2274160716354489, 0.6647852246244976;
  0.03676753088817477, 0.9983282789822835, 0.04459591973106185, -0.08358018957264844;
  0.2258901016046985, -0.05177381279930968, 0.9727759938985138, -0.2834237946241107]
getalign
triangulate points
Triangulating...Done. (192points, 0.0162221s, mean reproj err = 0.488991)
triangulation reproj error 0.488991
test triangulate
191/192 = 99.4792% are in front of camera
191/192 = 99.4792% are in front of camera
filtered out 2 high-error points
122/190 points were found in other views, adding 68 new
before triangulation: 3989 after 3989
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 190 K (measurements) = 380
intrinsic before bundle = [ 980.844 0 515.999 
0 980.844 341.947 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 380 valid 2D measurements.
mean reprojection error (in pixels): 1.15686
K0 = [ 1 0 0.526076 
0 1 0.348625 
0 0 1 ]
optimizer status = 0
refined K = [ 0.900301 0 0.565661 
0 0.900301 0.409374 
0 0 1 ]
Knew = [ 883.055 0 554.826 
0 883.055 401.532 
0 0 1 ]
mean reprojection error (in pixels): 0.349892
use new K 
[883.0548977995618, 0, 554.825717951184;
  0, 883.0548977995618, 401.5316132220033;
  0, 0, 1]
after 6 map size: 3989
