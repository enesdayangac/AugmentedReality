hello world
=========================== Baseline triangulation ===========================
Find camera matrices...
before fundamentalMat 22551
F keeping 15777 / 22551
22551 matches before, 15777 new matches after Fundamental Matrix
after fundamentalMat 15777
----------------------- SVD ------------------------
U:
[0.443813769828018, 0.1977144089715506, -0.8740356687207185;
  -0.5375525617559032, 0.8391216149761328, -0.08313939276608173;
  -0.7169843659806739, -0.5067385201115832, -0.4786956143254433]
W:
[237.2535753865256; 230.0716197224092; 1.661581393366265e-014]
Vt:
[0.1451537726770203, 0.8392177136269201, -0.5240648923677609;
  -0.474428602805282, 0.5238463256223418, 0.7074620328838852;
  0.8682441379691867, 0.1459405915664871, 0.4741871577925408]
----------------------------------------------------
det(R) == -1 [-1]: flip E's sign
----------------------- SVD ------------------------
U:
[-0.443813769828018, -0.1977144089715506, 0.8740356687207185;
  0.5375525617559032, -0.8391216149761328, 0.08313939276608173;
  0.7169843659806739, 0.5067385201115832, 0.4786956143254433]
W:
[237.2535753865256; 230.0716197224092; 1.661581393366265e-014]
Vt:
[0.1451537726770203, 0.8392177136269201, -0.5240648923677609;
  -0.474428602805282, 0.5238463256223418, 0.7074620328838852;
  0.8682441379691867, 0.1459405915664871, 0.4741871577925408]
----------------------------------------------------
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.5196194066426623, 0.1941220608801162, 0.8320530618416016, 0.8740356687207185;
  0.2054139330631017, -0.9736672453171452, 0.09887978307050324, 0.08313939276608173;
  0.8293375599500333, 0.1195354377420297, -0.5458117722987902, 0.4786956143254433]
test branch 1
Triangulating...Done. (15777points, 1.34947s, mean reproj err = 5.92309)
Triangulating...Done. (15777points, 1.33852s, mean reproj err = 6.01075)
15777/15777 = 100% are in front of camera
0/15777 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.5196194066426623, 0.1941220608801162, 0.8320530618416016, -0.8740356687207185;
  0.2054139330631017, -0.9736672453171452, 0.09887978307050324, -0.08313939276608173;
  0.8293375599500333, 0.1195354377420297, -0.5458117722987902, -0.4786956143254433]
test branch 2
Triangulating...Done. (15777points, 1.30008s, mean reproj err = 5.92309)
Triangulating...Done. (15777points, 1.3004s, mean reproj err = 6.01075)
0/15777 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.9981332848428213, 0.06099250420650737, -0.00314008272164118, 0.8740356687207185;
  -0.0610433522561652, 0.9979340696426663, -0.0200325183578112, 0.08313939276608173;
  0.001911762069216172, 0.02018680452784669, 0.9997943979082627, 0.4786956143254433]
test branch 3
Triangulating...Done. (15777points, 1.30131s, mean reproj err = 6.55657)
Triangulating...Done. (15777points, 1.29664s, mean reproj err = 6.67507)
15657/15777 = 99.2394% are in front of camera
15657/15777 = 99.2394% are in front of camera
Done. (8.49104s)
begin triangulation
p query index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
p train index 0
[0.9981332848428213, 0.06099250420650737, -0.00314008272164118, 0.8740356687207185;
  -0.0610433522561652, 0.9979340696426663, -0.0200325183578112, 0.08313939276608173;
  0.001911762069216172, 0.02018680452784669, 0.9997943979082627, 0.4786956143254433]
getalign
triangulate points
Triangulating...Done. (15777points, 1.34852s, mean reproj err = 6.55657)
triangulation reproj error 6.55657
test triangulate
15657/15777 = 99.2394% are in front of camera
15657/15777 = 99.2394% are in front of camera
filtered out 127 high-error points
3007/15650 points were found in other views, adding 12643 new
 after 12643
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 23816
train frame keypoints: 22551
match size: 23816-----------------------------------------------------------------
found 21010 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 21010
2d point: 21010
inliers size: 15433
projected point: 21010
--------------------------------------------------------------------------
(15433/21010)
found t = [0.8773978053844193; -0.04851254944919792; 0.4027665631347013]
R = 
[0.9982145541031141, 0.05948766069359195, -0.005377936586198951;
  -0.05958881071624814, 0.9979986482824378, -0.02116297861479185;
  0.004108237352472742, 0.02144565810673718, 0.9997615746437871]
frame pose [0.9982145541031141, 0.05948766069359195, -0.005377936586198951, 0.8773978053844193;
  -0.05958881071624814, 0.9979986482824378, -0.02116297861479185, -0.04851254944919792;
  0.004108237352472742, 0.02144565810673718, 0.9997615746437871, 0.4027665631347013]
begin triangulation
p query index 2
[0.9982145541031141, 0.05948766069359195, -0.005377936586198951, 0.8773978053844193;
  -0.05958881071624814, 0.9979986482824378, -0.02116297861479185, -0.04851254944919792;
  0.004108237352472742, 0.02144565810673718, 0.9997615746437871, 0.4027665631347013]
p train index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
getalign
triangulate points
Triangulating...Done. (23816points, 2.01882s, mean reproj err = 251.942)
triangulation reproj error 251.942
test triangulate
20415/23816 = 85.7197% are in front of camera
20097/23816 = 84.3844% are in front of camera
filtered out 7629 high-error points
15656/16187 points were found in other views, adding 531 new
before triangulation: 13174 after 13705
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 16187 K (measurements) = 32374
intrinsic before bundle = [ 1024 0 512 
0 1024 384 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 32374 valid 2D measurements.
mean reprojection error (in pixels): 5.08039
K0 = [ 1 0 0.5 
0 1 0.375 
0 0 1 ]
optimizer status = 0
refined K = [ 0.937764 0 0.553163 
0 0.937764 0.425982 
0 0 1 ]
Knew = [ 960.27 0 566.439 
0 960.27 436.206 
0 0 1 ]
mean reprojection error (in pixels): 0.87494
use new K 
[960.2701797031421, 0, 566.4385867529614;
  0, 960.2701797031421, 436.2058688965276;
  0, 0, 1]
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 20621
train frame keypoints: 23816
match size: 20621-----------------------------------------------------------------
found 16855 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 16855
2d point: 16855
inliers size: 8734
projected point: 16855
--------------------------------------------------------------------------
(8734/16855)
found t = [-2.320917696568237; -1.564966004362236; -2.10337716816214]
R = 
[0.9986404507408017, 0.03879413816364803, 0.03481759595877203;
  -0.03798974203410237, 0.999002354825444, -0.0234749771757092;
  -0.03569355186011707, 0.02212035029915891, 0.999117941215276]
frame pose [0.9986404507408017, 0.03879413816364803, 0.03481759595877203, -2.320917696568237;
  -0.03798974203410237, 0.999002354825444, -0.0234749771757092, -1.564966004362236;
  -0.03569355186011707, 0.02212035029915891, 0.999117941215276, -2.10337716816214]
begin triangulation
p query index 3
[0.9986404507408017, 0.03879413816364803, 0.03481759595877203, -2.320917696568237;
  -0.03798974203410237, 0.999002354825444, -0.0234749771757092, -1.564966004362236;
  -0.03569355186011707, 0.02212035029915891, 0.999117941215276, -2.10337716816214]
p train index 2
[0.9978641295700899, 0.05818306648745404, -0.0296969643472635, 0.3879901263098461;
  -0.05896070198802977, 0.9979211897853678, -0.02601796683898406, -1.454023513865219;
  0.02812142489997389, 0.02771334969779448, 0.9992202738686414, -2.208351426825368]
getalign
triangulate points
Triangulating...Done. (20621points, 1.74999s, mean reproj err = 629.2)
triangulation reproj error 629.2
test triangulate
16329/20621 = 79.1863% are in front of camera
16317/20621 = 79.1281% are in front of camera
filtered out 9276 high-error points
10485/11345 points were found in other views, adding 860 new
before triangulation: 14565 after 15425
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 11345 K (measurements) = 22690
intrinsic before bundle = [ 960.27 0 566.439 
0 960.27 436.206 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 22690 valid 2D measurements.
mean reprojection error (in pixels): 5.66332
K0 = [ 1 0 0.589874 
0 1 0.454253 
0 0 1 ]
optimizer status = 0
refined K = [ 0.926273 0 0.509447 
0 0.926273 0.452022 
0 0 1 ]
Knew = [ 889.472 0 489.207 
0 889.472 434.063 
0 0 1 ]
mean reprojection error (in pixels): 1.0549
use new K 
[889.4722781573753, 0, 489.2066262043423;
  0, 889.4722781573753, 434.0633029943657;
  0, 0, 1]
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22600
train frame keypoints: 20621
match size: 22600-----------------------------------------------------------------
found 15458 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 15458
2d point: 15458
inliers size: 3129
projected point: 15458
--------------------------------------------------------------------------
(3129/15458)
found t = [-1.932974938776382; -0.7903438226508993; -7.41297803537968]
R = 
[0.9934241556843536, 0.05591283008583101, 0.09991097204322565;
  -0.0506002900664536, 0.9972067077958107, -0.05493989963798201;
  -0.1027037367772954, 0.04952309924503685, 0.9934784371556065]
frame pose [0.9934241556843536, 0.05591283008583101, 0.09991097204322565, -1.932974938776382;
  -0.0506002900664536, 0.9972067077958107, -0.05493989963798201, -0.7903438226508993;
  -0.1027037367772954, 0.04952309924503685, 0.9934784371556065, -7.41297803537968]
begin triangulation
p query index 4
[0.9934241556843536, 0.05591283008583101, 0.09991097204322565, -1.932974938776382;
  -0.0506002900664536, 0.9972067077958107, -0.05493989963798201, -0.7903438226508993;
  -0.1027037367772954, 0.04952309924503685, 0.9934784371556065, -7.41297803537968]
p train index 3
[0.9974966271275715, 0.04487447305259375, 0.0546512629073816, -0.8563378802091797;
  -0.04326583705665472, 0.998604897317557, -0.0302708836537674, -1.025354752889654;
  -0.05593340873669975, 0.02783057170891302, 0.998046548546434, -7.693005575595743]
getalign
triangulate points
Triangulating...Done. (22600points, 1.91792s, mean reproj err = 325.077)
triangulation reproj error 325.077
test triangulate
18183/22600 = 80.4558% are in front of camera
17880/22600 = 79.115% are in front of camera
filtered out 9003 high-error points
10881/13597 points were found in other views, adding 2716 new
before triangulation: 18141 after 20857
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 13597 K (measurements) = 27194
intrinsic before bundle = [ 889.472 0 489.207 
0 889.472 434.063 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 27194 valid 2D measurements.
mean reprojection error (in pixels): 4.80216
K0 = [ 1 0 0.549996 
0 1 0.488001 
0 0 1 ]
optimizer status = 0
refined K = [ 0.944982 0 0.54284 
0 0.944982 0.496448 
0 0 1 ]
Knew = [ 840.535 0 482.841 
0 840.535 441.577 
0 0 1 ]
mean reprojection error (in pixels): 1.04349
use new K 
[840.5348620215831, 0, 482.8408783202425;
  0, 840.5348620215831, 441.5766203258135;
  0, 0, 1]
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22170
train frame keypoints: 22600
match size: 22170-----------------------------------------------------------------
found 17164 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 17164
2d point: 17164
inliers size: 11231
projected point: 17164
--------------------------------------------------------------------------
(11231/17164)
found t = [-2.74555042663768; -0.499431541701043; -11.46497321037486]
R = 
[0.988306885399896, 0.07646071830376858, 0.1319214115586576;
  -0.07134090011905273, 0.9965196918660024, -0.04311588678771471;
  -0.1347589560710542, 0.03320033553685021, 0.990322049375293]
frame pose [0.988306885399896, 0.07646071830376858, 0.1319214115586576, -2.74555042663768;
  -0.07134090011905273, 0.9965196918660024, -0.04311588678771471, -0.499431541701043;
  -0.1347589560710542, 0.03320033553685021, 0.990322049375293, -11.46497321037486]
begin triangulation
p query index 5
[0.988306885399896, 0.07646071830376858, 0.1319214115586576, -2.74555042663768;
  -0.07134090011905273, 0.9965196918660024, -0.04311588678771471, -0.499431541701043;
  -0.1347589560710542, 0.03320033553685021, 0.990322049375293, -11.46497321037486]
p train index 4
[0.9941101524634142, 0.05708480010677631, 0.09212128074411402, -1.791273836494252;
  -0.05174680390365238, 0.9968962639607016, -0.05933049120774024, -0.3925556504675095;
  -0.09522222983591296, 0.05421406181023696, 0.9939786529131851, -11.80461737160105]
getalign
triangulate points
Triangulating...Done. (22170points, 1.88703s, mean reproj err = 964.939)
triangulation reproj error 964.939
test triangulate
17696/22170 = 79.8196% are in front of camera
17208/22170 = 77.6184% are in front of camera
filtered out 8612 high-error points
12004/13558 points were found in other views, adding 1554 new
before triangulation: 22411 after 23965
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 13558 K (measurements) = 27116
intrinsic before bundle = [ 840.535 0 482.841 
0 840.535 441.577 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 27116 valid 2D measurements.
mean reprojection error (in pixels): 5.61904
K0 = [ 1 0 0.574445 
0 1 0.525352 
0 0 1 ]
optimizer status = 0
refined K = [ 0.990626 0 0.557535 
0 0.990626 0.517563 
0 0 1 ]
Knew = [ 832.656 0 468.627 
0 832.656 435.03 
0 0 1 ]
mean reprojection error (in pixels): 1.52399
use new K 
[832.6555357971997, 0, 468.627204553371;
  0, 832.6555357971997, 435.0298385329255;
  0, 0, 1]
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 21559
train frame keypoints: 22170
match size: 21559-----------------------------------------------------------------
found 16780 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 16780
2d point: 16780
inliers size: 4414
projected point: 16780
--------------------------------------------------------------------------
(4414/16780)
found t = [-3.237997355310363; -0.4355244461351192; -12.01307342368572]
R = 
[0.9826918952007104, 0.08608757770807893, 0.1640291683548733;
  -0.08059265065721968, 0.995949093294669, -0.03987766574876512;
  -0.1667976731458783, 0.02596791346801588, 0.9856491280893208]
frame pose [0.9826918952007104, 0.08608757770807893, 0.1640291683548733, -3.237997355310363;
  -0.08059265065721968, 0.995949093294669, -0.03987766574876512, -0.4355244461351192;
  -0.1667976731458783, 0.02596791346801588, 0.9856491280893208, -12.01307342368572]
begin triangulation
p query index 6
[0.9826918952007104, 0.08608757770807893, 0.1640291683548733, -3.237997355310363;
  -0.08059265065721968, 0.995949093294669, -0.03987766574876512, -0.4355244461351192;
  -0.1667976731458783, 0.02596791346801588, 0.9856491280893208, -12.01307342368572]
p train index 5
[0.9884231216578967, 0.07638220270921604, 0.1310934463706996, -2.59036019377985;
  -0.0716801449382245, 0.9966161691042437, -0.04022646270325704, -0.407240266374334;
  -0.1337224341451141, 0.03036396860210515, 0.9905535523216484, -12.52532307871907]
getalign
triangulate points
Triangulating...Done. (21559points, 1.83654s, mean reproj err = 343.598)
triangulation reproj error 343.598
test triangulate
17495/21559 = 81.1494% are in front of camera
15457/21559 = 71.6963% are in front of camera
Triangulation did not succeed
