hello world
F keeping 6128 / 21559
21559 matches before, 6128 new matches after Fundamental Matrix
=========================== Baseline triangulation ===========================
Find camera matrices...
before fundamentalMat 6128
F keeping 5560 / 6128
6128 matches before, 5560 new matches after Fundamental Matrix
after fundamentalMat 5560
----------------------- SVD ------------------------
U:
[-0.06744558013447743, 0.4190808121091302, -0.9054404268875317;
  0.9875602309315736, 0.1572392263442729, -0.0007848445905955855;
  -0.1420418389162174, 0.8942298913705616, 0.42447263442617]
W:
[13.60576323788914; 11.42632117802803; 7.355531760200531e-010]
Vt:
[0.6450903756238857, 0.1717700647335652, 0.74454916032379;
  0.09585249455680074, -0.9848994353294538, 0.1441714312024445;
  0.7580703836482945, -0.02163670837141153, -0.6518137358833257]
----------------------------------------------------
det(R) == -1 [-1]: flip E's sign
----------------------- SVD ------------------------
U:
[0.06744558013447743, -0.4190808121091302, 0.9054404268875317;
  -0.9875602309315736, -0.1572392263442729, 0.0007848445905955855;
  0.1420418389162174, -0.8942298913705616, -0.42447263442617]
W:
[13.60576323788914; 11.42632117802803; 7.355531760200531e-010]
Vt:
[0.6450903756238857, 0.1717700647335652, 0.74454916032379;
  0.09585249455680074, -0.9848994353294538, 0.1441714312024445;
  0.7580703836482945, -0.02163670837141153, -0.6518137358833257]
----------------------------------------------------
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.4095777461783445, -0.02514917489891801, -0.9119284998492869, 0.9054404268875317;
  -0.006178432485457542, -0.9996734873396669, 0.02479406546274688, 0.0007848445905955855;
  -0.9122542939375458, -0.004520808782946813, -0.4095993963380047, -0.42447263442617]
test branch 1
Triangulating...Done. (5560points, 0.471398s, mean reproj err = 17.6928)
Triangulating...Done. (5560points, 0.46472s, mean reproj err = 14.6016)
0/5560 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.4095777461783445, -0.02514917489891801, -0.9119284998492869, -0.9054404268875317;
  -0.006178432485457542, -0.9996734873396669, 0.02479406546274688, -0.0007848445905955855;
  -0.9122542939375458, -0.004520808782946813, -0.4095993963380047, 0.42447263442617]
test branch 2
Triangulating...Done. (5560points, 0.448251s, mean reproj err = 17.6928)
Triangulating...Done. (5560points, 0.447719s, mean reproj err = 14.6016)
5560/5560 = 100% are in front of camera
0/5560 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.9631973973842689, -0.01403232602958576, -0.2684285146894236, 0.9054404268875317;
  0.00736836736525171, 0.9996395244326197, -0.02581721043211473, 0.0007848445905955855;
  0.2686940282822479, 0.02288918998839445, 0.9629535835891228, -0.42447263442617]
test branch 3
Triangulating...Done. (5560points, 0.446015s, mean reproj err = 17.9233)
Triangulating...Done. (5560points, 0.446662s, mean reproj err = 14.7414)
5553/5560 = 99.8741% are in front of camera
5553/5560 = 99.8741% are in front of camera
Done. (2.89653s)
begin triangulation
p query index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
p train index 0
[0.9631973973842689, -0.01403232602958576, -0.2684285146894236, 0.9054404268875317;
  0.00736836736525171, 0.9996395244326197, -0.02581721043211473, 0.0007848445905955855;
  0.2686940282822479, 0.02288918998839445, 0.9629535835891228, -0.42447263442617]
getalign
triangulate points
Triangulating...Done. (5560points, 0.470453s, mean reproj err = 17.9233)
triangulation reproj error 17.9233
test triangulate
5553/5560 = 99.8741% are in front of camera
5553/5560 = 99.8741% are in front of camera
filtered out 2928 high-error points
489/2632 points were found in other views, adding 2143 new
 after 2143
after init map size: 2143
F keeping 11938 / 22600
22600 matches before, 11938 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22600
train frame keypoints: 21559
match size: 11938-----------------------------------------------------------------
found 2573 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 2573
2d point: 2573
inliers size: 2096
projected point: 2573
--------------------------------------------------------------------------
(2096/2573)
found t = [0.3913677468002919; 0.1857573713548511; -0.2214836732792445]
R = 
[0.9897297341880437, -0.04470135302365313, -0.1357823342777665;
  0.032100730134891, 0.9950911086803144, -0.09361211753928926;
  0.1393003818690791, 0.08829198413920451, 0.98630620455713]
frame pose [0.9897297341880437, -0.04470135302365313, -0.1357823342777665, 0.3913677468002919;
  0.032100730134891, 0.9950911086803144, -0.09361211753928926, 0.1857573713548511;
  0.1393003818690791, 0.08829198413920451, 0.98630620455713, -0.2214836732792445]
next to triangulate ,inliers size: 2096
begin triangulation
p query index 2
[0.9897297341880437, -0.04470135302365313, -0.1357823342777665, 0.3913677468002919;
  0.032100730134891, 0.9950911086803144, -0.09361211753928926, 0.1857573713548511;
  0.1393003818690791, 0.08829198413920451, 0.98630620455713, -0.2214836732792445]
p train index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
getalign
triangulate points
Triangulating...Done. (2096points, 0.172896s, mean reproj err = 14.4394)
triangulation reproj error 14.4394
test triangulate
2096/2096 = 100% are in front of camera
2096/2096 = 100% are in front of camera
filtered out 485 high-error points
250/1611 points were found in other views, adding 1361 new
before triangulation: 3504 after 3504
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 1611 K (measurements) = 3222
intrinsic before bundle = [ 1024 0 512 
0 1024 384 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 3222 valid 2D measurements.
mean reprojection error (in pixels): 13.6512
K0 = [ 1 0 0.5 
0 1 0.375 
0 0 1 ]
optimizer status = 0
refined K = [ 1.0034 0 0.654678 
0 1.0034 0.37047 
0 0 1 ]
Knew = [ 1027.48 0 670.39 
0 1027.48 379.362 
0 0 1 ]
mean reprojection error (in pixels): 0.310824
use new K 
[1027.478414419292, 0, 670.3902903189377;
  0, 1027.478414419292, 379.3616488078462;
  0, 0, 1]
after 2 map size: 3504
F keeping 12911 / 22170
22170 matches before, 12911 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22170
train frame keypoints: 22600
match size: 12911-----------------------------------------------------------------
found 1544 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 1544
2d point: 1544
inliers size: 1470
projected point: 1544
--------------------------------------------------------------------------
(1470/1544)
found t = [-0.4580828516739464; 0.05535028352421689; 0.02282651777318856]
R = 
[0.999807082150356, -0.01932294651421262, -0.003524516988205452;
  0.0192101489930083, 0.9993761718517571, -0.02963506893182114;
  0.004094955147213832, 0.02956164530157695, 0.9995545710312199]
frame pose [0.999807082150356, -0.01932294651421262, -0.003524516988205452, -0.4580828516739464;
  0.0192101489930083, 0.9993761718517571, -0.02963506893182114, 0.05535028352421689;
  0.004094955147213832, 0.02956164530157695, 0.9995545710312199, 0.02282651777318856]
next to triangulate ,inliers size: 1470
begin triangulation
p query index 3
[0.999807082150356, -0.01932294651421262, -0.003524516988205452, -0.4580828516739464;
  0.0192101489930083, 0.9993761718517571, -0.02963506893182114, 0.05535028352421689;
  0.004094955147213832, 0.02956164530157695, 0.9995545710312199, 0.02282651777318856]
p train index 2
[0.9977848609835001, -0.03872927807783399, -0.05408709838499073, -0.3085089137291907;
  0.03684706878084787, 0.9986946362340549, -0.03537396047359768, 0.0149825515243534;
  0.05538650299845007, 0.03330265119923627, 0.9979094491529306, -0.03949794784293947]
getalign
triangulate points
Triangulating...Done. (1470points, 0.120222s, mean reproj err = 0.366944)
triangulation reproj error 0.366944
test triangulate
1467/1470 = 99.7959% are in front of camera
1467/1470 = 99.7959% are in front of camera
filtered out 5 high-error points
809/1465 points were found in other views, adding 656 new
before triangulation: 4160 after 4160
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 1465 K (measurements) = 2930
intrinsic before bundle = [ 1027.48 0 670.39 
0 1027.48 379.362 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 2930 valid 2D measurements.
mean reprojection error (in pixels): 0.670104
K0 = [ 1 0 0.652462 
0 1 0.369216 
0 0 1 ]
optimizer status = 0
refined K = [ 0.872389 0 0.500106 
0 0.872389 0.270085 
0 0 1 ]
Knew = [ 896.361 0 513.848 
0 896.361 277.507 
0 0 1 ]
mean reprojection error (in pixels): 0.303135
use new K 
[896.3613424812714, 0, 513.8482834681539;
  0, 896.3613424812714, 277.5069262067622;
  0, 0, 1]
after 3 map size: 4160
F keeping 11396 / 20621
20621 matches before, 11396 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 20621
train frame keypoints: 22170
match size: 11396-----------------------------------------------------------------
found 1258 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 1258
2d point: 1258
inliers size: 1061
projected point: 1258
--------------------------------------------------------------------------
(1061/1258)
found t = [0.2018961860493384; 0.2483394961627772; -0.3722693043154091]
R = 
[0.9950265546495706, -0.05755283960841436, -0.08130083760462289;
  0.05773496250969596, 0.9983319396887559, -0.0001109111822823116;
  0.08117160615762839, -0.004583541239531304, 0.9966896013822439]
frame pose [0.9950265546495706, -0.05755283960841436, -0.08130083760462289, 0.2018961860493384;
  0.05773496250969596, 0.9983319396887559, -0.0001109111822823116, 0.2483394961627772;
  0.08117160615762839, -0.004583541239531304, 0.9966896013822439, -0.3722693043154091]
next to triangulate ,inliers size: 1061
begin triangulation
p query index 4
[0.9950265546495706, -0.05755283960841436, -0.08130083760462289, 0.2018961860493384;
  0.05773496250969596, 0.9983319396887559, -0.0001109111822823116, 0.2483394961627772;
  0.08117160615762839, -0.004583541239531304, 0.9966896013822439, -0.3722693043154091]
p train index 3
[0.9995289160040947, -0.02578543818245285, 0.01664503678034112, -0.06283711599217817;
  0.02612329439630477, 0.9994503545888509, -0.02040985551405332, 0.3140738238073145;
  -0.01610961084458595, 0.02083506395381202, 0.9996531301148797, -0.2751389238202361]
getalign
triangulate points
Triangulating...Done. (1061points, 0.0875704s, mean reproj err = 0.426599)
triangulation reproj error 0.426599
test triangulate
1059/1061 = 99.8115% are in front of camera
1059/1061 = 99.8115% are in front of camera
filtered out 3 high-error points
893/1058 points were found in other views, adding 165 new
before triangulation: 4325 after 4325
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 1058 K (measurements) = 2116
intrinsic before bundle = [ 896.361 0 513.848 
0 896.361 277.507 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 2116 valid 2D measurements.
mean reprojection error (in pixels): 1.08087
K0 = [ 1 0 0.57326 
0 1 0.309593 
0 0 1 ]
optimizer status = 0
refined K = [ 1.04889 0 0.612665 
0 1.04889 0.319753 
0 0 1 ]
Knew = [ 940.182 0 549.169 
0 940.182 286.614 
0 0 1 ]
mean reprojection error (in pixels): 0.350566
use new K 
[940.1816494228012, 0, 549.1694160741713;
  0, 940.1816494228012, 286.614125444926;
  0, 0, 1]
after 4 map size: 4325
F keeping 13640 / 22138
22138 matches before, 13640 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22138
train frame keypoints: 20621
match size: 13640-----------------------------------------------------------------
found 1009 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 1009
2d point: 1009
inliers size: 408
projected point: 1009
--------------------------------------------------------------------------
(408/1009)
found t = [0.1700978246911473; 0.2402168297497925; -0.4466877746387348]
R = 
[0.9919346410117003, -0.07197258851356035, -0.1043341481186624;
  0.07296106523215774, 0.9973185941108663, 0.005683731249267434;
  0.103645313069034, -0.0132502205031764, 0.994526058349121]
frame pose [0.9919346410117003, -0.07197258851356035, -0.1043341481186624, 0.1700978246911473;
  0.07296106523215774, 0.9973185941108663, 0.005683731249267434, 0.2402168297497925;
  0.103645313069034, -0.0132502205031764, 0.994526058349121, -0.4466877746387348]
next to triangulate ,inliers size: 408
begin triangulation
p query index 5
[0.9919346410117003, -0.07197258851356035, -0.1043341481186624, 0.1700978246911473;
  0.07296106523215774, 0.9973185941108663, 0.005683731249267434, 0.2402168297497925;
  0.103645313069034, -0.0132502205031764, 0.994526058349121, -0.4466877746387348]
p train index 4
[0.9965091508082999, -0.06016400064001328, -0.05787750324874851, 0.03361025429396049;
  0.06077226630465406, 0.9981128137568234, 0.008805831172177011, 0.2197464906025982;
  0.0572384835885494, -0.01229243838402884, 0.9982848551165438, -0.4162219780886126]
getalign
triangulate points
Triangulating...Done. (408points, 0.0340436s, mean reproj err = 0.526578)
triangulation reproj error 0.526578
test triangulate
408/408 = 100% are in front of camera
408/408 = 100% are in front of camera
filtered out 0 high-error points
301/408 points were found in other views, adding 107 new
before triangulation: 4432 after 4432
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 408 K (measurements) = 816
intrinsic before bundle = [ 940.182 0 549.169 
0 940.182 286.614 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 816 valid 2D measurements.
mean reprojection error (in pixels): 1.29251
K0 = [ 1 0 0.58411 
0 1 0.30485 
0 0 1 ]
optimizer status = 0
refined K = [ 1.09716 0 0.612743 
0 1.09716 0.311918 
0 0 1 ]
Knew = [ 1031.53 0 576.09 
0 1031.53 293.259 
0 0 1 ]
mean reprojection error (in pixels): 0.309256
use new K 
[1031.533615717608, 0, 576.0897215961926;
  0, 1031.533615717608, 293.2591440592573;
  0, 0, 1]
after 5 map size: 4432
F keeping 14729 / 22551
22551 matches before, 14729 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22551
train frame keypoints: 22138
match size: 14729-----------------------------------------------------------------
found 408 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 408
2d point: 408
inliers size: 224
projected point: 408
--------------------------------------------------------------------------
(224/408)
found t = [0.03730182507971475; 0.2299474740323673; -0.558039707861798]
R = 
[0.9900026935919518, -0.1209301758174853, -0.0725986174622633;
  0.124242924750517, 0.9913205576933665, 0.04297961777343087;
  0.06677096921654892, -0.05156980193160463, 0.9964347410636674]
frame pose [0.9900026935919518, -0.1209301758174853, -0.0725986174622633, 0.03730182507971475;
  0.124242924750517, 0.9913205576933665, 0.04297961777343087, 0.2299474740323673;
  0.06677096921654892, -0.05156980193160463, 0.9964347410636674, -0.558039707861798]
next to triangulate ,inliers size: 224
begin triangulation
p query index 6
[0.9900026935919518, -0.1209301758174853, -0.0725986174622633, 0.03730182507971475;
  0.124242924750517, 0.9913205576933665, 0.04297961777343087, 0.2299474740323673;
  0.06677096921654892, -0.05156980193160463, 0.9964347410636674, -0.558039707861798]
p train index 5
[0.9945624286342191, -0.07272068917486779, -0.07454714558678621, 0.03211940975630818;
  0.07398977063653574, 0.9971549973572148, 0.01440225977709094, 0.2437850171059879;
  0.07328771650391408, -0.01983967266529923, 0.9971134830089179, -0.5136918885124022]
getalign
triangulate points
Triangulating...Done. (224points, 0.0188552s, mean reproj err = 0.543961)
triangulation reproj error 0.543961
test triangulate
217/224 = 96.875% are in front of camera
217/224 = 96.875% are in front of camera
filtered out 8 high-error points
43/216 points were found in other views, adding 173 new
before triangulation: 4605 after 4605
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 216 K (measurements) = 432
intrinsic before bundle = [ 1031.53 0 576.09 
0 1031.53 293.259 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 432 valid 2D measurements.
mean reprojection error (in pixels): 0.686398
K0 = [ 1 0 0.558479 
0 1 0.284294 
0 0 1 ]
optimizer status = 0
refined K = [ 0.9764 0 0.590226 
0 0.9764 0.314913 
0 0 1 ]
Knew = [ 1007.19 0 608.838 
0 1007.19 324.844 
0 0 1 ]
mean reprojection error (in pixels): 0.418898
use new K 
[1007.189630914261, 0, 608.8379536715579;
  0, 1007.189630914261, 324.8435362656232;
  0, 0, 1]
after 6 map size: 4605
