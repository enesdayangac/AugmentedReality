hello world
P1000965.JPG
P1000966.JPG
P1000967.JPG
P1000968.JPG
P1000969.JPG
P1000970.JPG
P1000971.JPG
F keeping 10019 / 12112
12112 matches before, 10019 new matches after Fundamental Matrix
=========================== Baseline triangulation ===========================
Find camera matrices...
before fundamentalMat 12112
F keeping 10019 / 12112
12112 matches before, 10019 new matches after Fundamental Matrix
after fundamentalMat 10019
K
[1024, 0, 512;
  0, 1024, 384;
  0, 0, 1]
F
[2.709787199298531e-006, -3.485581720325174e-005, 0.02290610327979298;
  3.817622808085591e-005, 5.47135660734347e-006, 0.01663800339659516;
  -0.02369573205494628, -0.02177173438833913, 1]
det(F)
-4.60905e-021
E
[2.841417822291657, -36.5489733797169, 11.17069365226001;
  40.03067653611157, 5.737133225901786, 39.2040787058824;
  -7.832217012077326, -38.41731774380455, 0.7943155235811794]
----------------------- SVD ------------------------
U:
[-0.06314508051038122, 0.7132327261701534, -0.6980771999766419;
  0.9464247722376284, 0.2647543097822431, 0.184892687650651;
  -0.3166904629165372, 0.6490024913446937, 0.6917390526246803]
W:
[57.5999611502596; 53.4894792869083; 1.646073949191703e-012]
Vt:
[0.6976912830277448, 0.3455566742767238, 0.6275487697780228;
  0.1409951650860692, -0.9250777678369386, 0.3526350618928571;
  0.7023868143761323, -0.1575490663781837, -0.6941405150788355]
----------------------------------------------------
singular value ratio: 0.928637
det(R) == -1 [-1]: flip E's sign
----------------------- SVD ------------------------
U:
[0.06314508051038122, -0.7132327261701534, 0.6980771999766419;
  -0.9464247722376284, -0.2647543097822431, -0.184892687650651;
  0.3166904629165372, -0.6490024913446937, -0.6917390526246803]
W:
[57.5999611502596; 53.4894792869083; 1.646073949191703e-012]
Vt:
[0.6976912830277448, 0.3455566742767238, 0.6275487697780228;
  0.1409951650860692, -0.9250777678369386, 0.3526350618928571;
  0.7023868143761323, -0.1575490663781837, -0.6941405150788355]
----------------------------------------------------
singular value ratio: 0.928637
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[-0.01619918618976107, -0.2980296298284688, -0.9544191564040903, 0.6980771999766419;
  -0.1811416429562903, -0.9378744641964366, 0.2959378221778062, -0.184892687650651;
  -0.9833235945271959, 0.1776790059420441, -0.03879277372864382, -0.6917390526246803]
test branch 1
Triangulating...Done. (10019points, 0.842918s, mean reproj err = 10.3178)
Triangulating...Done. (10019points, 0.836834s, mean reproj err = 9.94085)
0/10019 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[-0.01619918618976107, -0.2980296298284688, -0.9544191564040903, -0.6980771999766419;
  -0.1811416429562903, -0.9378744641964366, 0.2959378221778062, 0.184892687650651;
  -0.9833235945271959, 0.1776790059420441, -0.03879277372864382, 0.6917390526246803]
test branch 2
Triangulating...Done. (10019points, 0.808001s, mean reproj err = 10.3178)
Triangulating...Done. (10019points, 0.806145s, mean reproj err = 9.94085)
10019/10019 = 100% are in front of camera
0/10019 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.9968396275501685, 0.07806680759603565, -0.01470817790906448, 0.6980771999766419;
  -0.07859072880447368, 0.996133804835463, -0.03925481129753999, -0.184892687650651;
  0.01158681542197004, 0.04028667789465122, 0.9991209783067263, -0.6917390526246803]
test branch 3
Triangulating...Done. (10019points, 0.80429s, mean reproj err = 12.4215)
Triangulating...Done. (10019points, 0.806651s, mean reproj err = 11.8159)
9988/10019 = 99.6906% are in front of camera
9988/10019 = 99.6906% are in front of camera
Done. (5.23042s)
begin triangulation
p query index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
p train index 0
[0.9968396275501685, 0.07806680759603565, -0.01470817790906448, 0.6980771999766419;
  -0.07859072880447368, 0.996133804835463, -0.03925481129753999, -0.184892687650651;
  0.01158681542197004, 0.04028667789465122, 0.9991209783067263, -0.6917390526246803]
getalign
triangulate points
Triangulating...Done. (10019points, 0.842748s, mean reproj err = 12.4215)
triangulation reproj error 12.4215
test triangulate
9988/10019 = 99.6906% are in front of camera
9988/10019 = 99.6906% are in front of camera
filtered out 3130 high-error points
0/6889 points were found in other views, adding 6889 new
 after 6889
after init map size: 6889
F keeping 9759 / 11386
11386 matches before, 9759 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 17746
train frame keypoints: 18207
match size: 11386
-----------------------------------------------------------------
found 4976 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 4976
2d point: 4976
inliers size: 2611
projected point: 4976
--------------------------------------------------------------------------
(2611/4976)
found t = [0.1978830672199687; -0.2872467450931422; -0.06294735838715582]
R = 
[0.998535820816025, 0.04643126469090066, -0.02775521944555205;
  -0.04695024705979267, 0.9987286950197079, -0.0183485161595076;
  0.02686798928635446, 0.01962476505425746, 0.9994463366025579]
frame pose [0.998535820816025, 0.04643126469090066, -0.02775521944555205, 0.1978830672199687;
  -0.04695024705979267, 0.9987286950197079, -0.0183485161595076, -0.2872467450931422;
  0.02686798928635446, 0.01962476505425746, 0.9994463366025579, -0.06294735838715582]
next to triangulate ,inliers size: 2611
match size: 11386
match size: 2611
begin triangulation
p query index 2
[0.998535820816025, 0.04643126469090066, -0.02775521944555205, 0.1978830672199687;
  -0.04695024705979267, 0.9987286950197079, -0.0183485161595076, -0.2872467450931422;
  0.02686798928635446, 0.01962476505425746, 0.9994463366025579, -0.06294735838715582]
p train index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
getalign
triangulate points
Triangulating...Done. (2611points, 0.218137s, mean reproj err = 29.8462)
triangulation reproj error 29.8462
test triangulate
2598/2611 = 99.5021% are in front of camera
2604/2611 = 99.7319% are in front of camera
filtered out 118 high-error points
622/2493 points were found in other views, adding 1871 new
before triangulation: 8760 after 8760
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 2493 K (measurements) = 4986
intrinsic before bundle = [ 1024 0 512 
0 1024 384 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 4986 valid 2D measurements.
mean reprojection error (in pixels): 7.62107
K0 = [ 1 0 0.5 
0 1 0.375 
0 0 1 ]
optimizer status = 0
refined K = [ 1.07776 0 0.548817 
0 1.07776 0.453148 
0 0 1 ]
Knew = [ 1103.62 0 561.989 
0 1103.62 464.023 
0 0 1 ]
mean reprojection error (in pixels): 1.4864
use new K 
[1103.623886149407, 0, 561.9890983889965;
  0, 1103.623886149407, 464.0233270756531;
  0, 0, 1]
after 2 map size: 8760
F keeping 8179 / 10384
10384 matches before, 8179 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 16577
train frame keypoints: 18207
match size: 10384
-----------------------------------------------------------------
found 5777 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 5777
2d point: 5777
inliers size: 1584
projected point: 5777
--------------------------------------------------------------------------
(1584/5777)
found t = [-0.5851346310549113; -0.3870407981041528; 1.670402430853372]
R = 
[0.9979140505219373, 0.05702973210958315, -0.03025156899087483;
  -0.05964030100482576, 0.99379560509502, -0.09387933633061558;
  0.02470996290879974, 0.09548772145847988, 0.9951238680605111]
frame pose [0.9979140505219373, 0.05702973210958315, -0.03025156899087483, -0.5851346310549113;
  -0.05964030100482576, 0.99379560509502, -0.09387933633061558, -0.3870407981041528;
  0.02470996290879974, 0.09548772145847988, 0.9951238680605111, 1.670402430853372]
next to triangulate ,inliers size: 1584
match size: 10384
match size: 1584
begin triangulation
p query index 3
[0.9979140505219373, 0.05702973210958315, -0.03025156899087483, -0.5851346310549113;
  -0.05964030100482576, 0.99379560509502, -0.09387933633061558, -0.3870407981041528;
  0.02470996290879974, 0.09548772145847988, 0.9951238680605111, 1.670402430853372]
p train index 1
[0.9997900129852417, -0.001384887768067867, 0.02044534227739294, -1.010201492893164;
  0.00207851538645337, 0.9994215825028631, -0.03394378000843382, -0.1161391453157829;
  -0.02038650800794906, 0.03397914821390515, 0.9992145954588027, -2.61428686735636]
getalign
triangulate points
Triangulating...Done. (1584points, 0.130471s, mean reproj err = 101.525)
triangulation reproj error 101.525
test triangulate
1548/1584 = 97.7273% are in front of camera
1242/1584 = 78.4091% are in front of camera
filtered out 980 high-error points
400/604 points were found in other views, adding 204 new
before triangulation: 8964 after 8964
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 604 K (measurements) = 1208
intrinsic before bundle = [ 1103.62 0 561.989 
0 1103.62 464.023 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 1208 valid 2D measurements.
mean reprojection error (in pixels): 16.3467
K0 = [ 1 0 0.509222 
0 1 0.420454 
0 0 1 ]
optimizer status = 0
refined K = [ 1.01275 0 0.429678 
0 1.01275 0.517382 
0 0 1 ]
Knew = [ 1117.69 0 474.203 
0 1117.69 570.995 
0 0 1 ]
mean reprojection error (in pixels): 1.36189
use new K 
[1117.690665673396, 0, 474.2033515751388;
  0, 1117.690665673396, 570.9953503039806;
  0, 0, 1]
after 3 map size: 8964
F keeping 7029 / 10185
10185 matches before, 7029 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 18063
train frame keypoints: 18207
match size: 10185
-----------------------------------------------------------------
found 5679 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 5679
2d point: 5679
inliers size: 1513
projected point: 5679
--------------------------------------------------------------------------
(1513/5679)
found t = [0.7900399723476295; 0.4351610036946885; 1.148603732353777]
R = 
[0.9992475081365816, 0.02107791266817758, -0.03255977703217555;
  -0.02892507772540144, 0.9642261860695272, -0.2634980113329;
  0.02584100155589548, 0.2642415253047225, 0.9641102939722311]
frame pose [0.9992475081365816, 0.02107791266817758, -0.03255977703217555, 0.7900399723476295;
  -0.02892507772540144, 0.9642261860695272, -0.2634980113329, 0.4351610036946885;
  0.02584100155589548, 0.2642415253047225, 0.9641102939722311, 1.148603732353777]
next to triangulate ,inliers size: 1513
match size: 10185
match size: 1513
begin triangulation
p query index 4
[0.9992475081365816, 0.02107791266817758, -0.03255977703217555, 0.7900399723476295;
  -0.02892507772540144, 0.9642261860695272, -0.2634980113329, 0.4351610036946885;
  0.02584100155589548, 0.2642415253047225, 0.9641102939722311, 1.148603732353777]
p train index 1
[0.9999856946542278, 0.003425079284942268, 0.004108444814296784, 0.5354356446426888;
  -0.003084620627223872, 0.9967748216108748, -0.08019002505420657, -0.2447674400840691;
  -0.004369851540540995, 0.08017620491455077, 0.9967711274726081, -4.182460806120827]
getalign
triangulate points
Triangulating...Done. (1513points, 0.124921s, mean reproj err = 184.271)
triangulation reproj error 184.271
test triangulate
1471/1513 = 97.2241% are in front of camera
1328/1513 = 87.7726% are in front of camera
filtered out 1163 high-error points
262/350 points were found in other views, adding 88 new
before triangulation: 9052 after 9052
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 350 K (measurements) = 700
intrinsic before bundle = [ 1117.69 0 474.203 
0 1117.69 570.995 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 700 valid 2D measurements.
mean reprojection error (in pixels): 27.8492
K0 = [ 1 0 0.424271 
0 1 0.510871 
0 0 1 ]
optimizer status = 0
refined K = [ 0.98912 0 0.335368 
0 0.98912 0.486641 
0 0 1 ]
Knew = [ 1105.53 0 374.838 
0 1105.53 543.914 
0 0 1 ]
mean reprojection error (in pixels): 2.19628
use new K 
[1105.530225692232, 0, 374.8377077645004;
  0, 1105.530225692232, 543.9137745180763;
  0, 0, 1]
after 4 map size: 9052
F keeping 6196 / 9708
9708 matches before, 6196 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 17730
train frame keypoints: 18207
match size: 9708
-----------------------------------------------------------------
found 5395 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 5395
2d point: 5395
inliers size: 1211
projected point: 5395
--------------------------------------------------------------------------
(1211/5395)
found t = [0.919757416370373; 0.4374364112151838; 0.9831911636148547]
R = 
[0.9974974931161514, 0.04847838504632834, 0.05146452574631785;
  -0.03600873836600383, 0.9747713397322465, -0.2202821054872363;
  -0.0608450654390491, 0.2178776753591362, 0.9740776132279279]
frame pose [0.9974974931161514, 0.04847838504632834, 0.05146452574631785, 0.919757416370373;
  -0.03600873836600383, 0.9747713397322465, -0.2202821054872363, 0.4374364112151838;
  -0.0608450654390491, 0.2178776753591362, 0.9740776132279279, 0.9831911636148547]
next to triangulate ,inliers size: 1211
match size: 9708
match size: 1211
begin triangulation
p query index 5
[0.9974974931161514, 0.04847838504632834, 0.05146452574631785, 0.919757416370373;
  -0.03600873836600383, 0.9747713397322465, -0.2202821054872363, 0.4374364112151838;
  -0.0608450654390491, 0.2178776753591362, 0.9740776132279279, 0.9831911636148547]
p train index 1
[0.9996967932270213, 0.01643112558900791, 0.01833956715648064, 1.285166502037601;
  -0.01427156432544664, 0.9935789417980072, -0.1122372882212352, 0.5049299542646453;
  -0.02006599270690237, 0.1119415228028911, 0.9935121797991491, -5.080439383308761]
getalign
triangulate points
Triangulating...Done. (1211points, 0.100649s, mean reproj err = 120.341)
triangulation reproj error 120.341
test triangulate
1180/1211 = 97.4401% are in front of camera
1039/1211 = 85.7969% are in front of camera
filtered out 939 high-error points
216/272 points were found in other views, adding 56 new
before triangulation: 9108 after 9108
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 272 K (measurements) = 544
intrinsic before bundle = [ 1105.53 0 374.838 
0 1105.53 543.914 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 544 valid 2D measurements.
mean reprojection error (in pixels): 31.9858
K0 = [ 1 0 0.339057 
0 1 0.491994 
0 0 1 ]
optimizer status = 0
refined K = [ 0.941695 0 0.368251 
0 0.941695 0.589879 
0 0 1 ]
Knew = [ 1041.07 0 407.113 
0 1041.07 652.129 
0 0 1 ]
mean reprojection error (in pixels): 3.07212
use new K 
[1041.072086295219, 0, 407.1127639295465;
  0, 1041.072086295219, 652.1294895144578;
  0, 0, 1]
after 5 map size: 9108
F keeping 5210 / 9235
9235 matches before, 5210 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 17192
train frame keypoints: 18207
match size: 9235
-----------------------------------------------------------------
found 5077 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 5077
2d point: 5077
inliers size: 1017
projected point: 5077
--------------------------------------------------------------------------
(1017/5077)
found t = [-0.8125068722254354; 0.543320009387755; 0.7847486543005324]
R = 
[0.9887155015628778, 0.05893447085302374, 0.1377257605335369;
  -0.0102598486081003, 0.9438453072639188, -0.3302283625953675;
  -0.1494536465791515, 0.3250888557012571, 0.9337991451179645]
frame pose [0.9887155015628778, 0.05893447085302374, 0.1377257605335369, -0.8125068722254354;
  -0.0102598486081003, 0.9438453072639188, -0.3302283625953675, 0.543320009387755;
  -0.1494536465791515, 0.3250888557012571, 0.9337991451179645, 0.7847486543005324]
next to triangulate ,inliers size: 1017
match size: 9235
match size: 1017
begin triangulation
p query index 6
[0.9887155015628778, 0.05893447085302374, 0.1377257605335369, -0.8125068722254354;
  -0.0102598486081003, 0.9438453072639188, -0.3302283625953675, 0.543320009387755;
  -0.1494536465791515, 0.3250888557012571, 0.9337991451179645, 0.7847486543005324]
p train index 1
[0.9998165586201351, 0.00449167540949951, 0.01861918260841623, 1.048120947168835;
  -0.001574974915775452, 0.9881014564148836, -0.1537954202335104, 0.6679392876823047;
  -0.0190884405597873, 0.1537378830438453, 0.9879272719963717, -7.266995049164486]
getalign
triangulate points
Triangulating...Done. (1017points, 0.0841833s, mean reproj err = 89.0273)
triangulation reproj error 89.0273
test triangulate
953/1017 = 93.707% are in front of camera
909/1017 = 89.3805% are in front of camera
filtered out 885 high-error points
104/132 points were found in other views, adding 28 new
before triangulation: 9136 after 9136
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 132 K (measurements) = 264
intrinsic before bundle = [ 1041.07 0 407.113 
0 1041.07 652.129 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 264 valid 2D measurements.
mean reprojection error (in pixels): 49.3335
K0 = [ 1 0 0.391051 
0 1 0.626402 
0 0 1 ]
optimizer status = 0
refined K = [ 1.05333 0 0.331277 
0 1.05333 0.462234 
0 0 1 ]
Knew = [ 1096.59 0 344.883 
0 1096.59 481.219 
0 0 1 ]
mean reprojection error (in pixels): 2.57244
use new K 
[1096.587970260625, 0, 344.8831396283733;
  0, 1096.587970260625, 481.2188784956894;
  0, 0, 1]
after 6 map size: 9136
get color: 
9136  18272
&&m&&h&&d
load header success
7
9136
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
&&m&&p&&t&&
tracker
0
9136
