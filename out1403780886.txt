hello world
F keeping 6128 / 21559
21559 matches before, 6128 new matches after Fundamental Matrix
=========================== Baseline triangulation ===========================
Find camera matrices...
before fundamentalMat 6128
F keeping 5560 / 6128
6128 matches before, 5560 new matches after Fundamental Matrix
after fundamentalMat 5560
----------------------- SVD ------------------------
U:
[-0.06744558013447743, 0.4190808121091302, -0.9054404268875317;
  0.9875602309315736, 0.1572392263442729, -0.0007848445905955855;
  -0.1420418389162174, 0.8942298913705616, 0.42447263442617]
W:
[13.60576323788914; 11.42632117802803; 7.355531760200531e-010]
Vt:
[0.6450903756238857, 0.1717700647335652, 0.74454916032379;
  0.09585249455680074, -0.9848994353294538, 0.1441714312024445;
  0.7580703836482945, -0.02163670837141153, -0.6518137358833257]
----------------------------------------------------
det(R) == -1 [-1]: flip E's sign
----------------------- SVD ------------------------
U:
[0.06744558013447743, -0.4190808121091302, 0.9054404268875317;
  -0.9875602309315736, -0.1572392263442729, 0.0007848445905955855;
  0.1420418389162174, -0.8942298913705616, -0.42447263442617]
W:
[13.60576323788914; 11.42632117802803; 7.355531760200531e-010]
Vt:
[0.6450903756238857, 0.1717700647335652, 0.74454916032379;
  0.09585249455680074, -0.9848994353294538, 0.1441714312024445;
  0.7580703836482945, -0.02163670837141153, -0.6518137358833257]
----------------------------------------------------
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.4095777461783445, -0.02514917489891801, -0.9119284998492869, 0.9054404268875317;
  -0.006178432485457542, -0.9996734873396669, 0.02479406546274688, 0.0007848445905955855;
  -0.9122542939375458, -0.004520808782946813, -0.4095993963380047, -0.42447263442617]
test branch 1
Triangulating...Done. (5560points, 0.490734s, mean reproj err = 17.6928)
Triangulating...Done. (5560points, 0.482738s, mean reproj err = 14.6016)
0/5560 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.4095777461783445, -0.02514917489891801, -0.9119284998492869, -0.9054404268875317;
  -0.006178432485457542, -0.9996734873396669, 0.02479406546274688, -0.0007848445905955855;
  -0.9122542939375458, -0.004520808782946813, -0.4095993963380047, 0.42447263442617]
test branch 2
Triangulating...Done. (5560points, 0.467555s, mean reproj err = 17.6928)
Triangulating...Done. (5560points, 0.46148s, mean reproj err = 14.6016)
5560/5560 = 100% are in front of camera
0/5560 = 0% are in front of camera
P
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
Testing P1 
[0.9631973973842689, -0.01403232602958576, -0.2684285146894236, 0.9054404268875317;
  0.00736836736525171, 0.9996395244326197, -0.02581721043211473, 0.0007848445905955855;
  0.2686940282822479, 0.02288918998839445, 0.9629535835891228, -0.42447263442617]
test branch 3
Triangulating...Done. (5560points, 0.461097s, mean reproj err = 17.9233)
Triangulating...Done. (5560points, 0.461537s, mean reproj err = 14.7414)
5553/5560 = 99.8741% are in front of camera
5553/5560 = 99.8741% are in front of camera
Done. (3.0296s)
begin triangulation
p query index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
p train index 0
[0.9631973973842689, -0.01403232602958576, -0.2684285146894236, 0.9054404268875317;
  0.00736836736525171, 0.9996395244326197, -0.02581721043211473, 0.0007848445905955855;
  0.2686940282822479, 0.02288918998839445, 0.9629535835891228, -0.42447263442617]
getalign
triangulate points
Triangulating...Done. (5560points, 0.490319s, mean reproj err = 17.9233)
triangulation reproj error 17.9233
test triangulate
5553/5560 = 99.8741% are in front of camera
5553/5560 = 99.8741% are in front of camera
filtered out 2928 high-error points
489/2632 points were found in other views, adding 2143 new
 after 2143
F keeping 11938 / 22600
22600 matches before, 11938 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22600
train frame keypoints: 21559
match size: 11938-----------------------------------------------------------------
found 2573 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 2573
2d point: 2573
inliers size: 1645
projected point: 2573
--------------------------------------------------------------------------
(1645/2573)
found t = [0.5387721022079867; 0.004405748557273936; -0.2026385150413348]
R = 
[0.9813852833054795, -0.02927615596798454, -0.1898047217620313;
  0.0236959229294462, 0.9992195591160076, -0.03160341621617954;
  0.1905818169394594, 0.02651752951821827, 0.9813130956429272]
frame pose [0.9813852833054795, -0.02927615596798454, -0.1898047217620313, 0.5387721022079867;
  0.0236959229294462, 0.9992195591160076, -0.03160341621617954, 0.004405748557273936;
  0.1905818169394594, 0.02651752951821827, 0.9813130956429272, -0.2026385150413348]
begin triangulation
p query index 2
[0.9813852833054795, -0.02927615596798454, -0.1898047217620313, 0.5387721022079867;
  0.0236959229294462, 0.9992195591160076, -0.03160341621617954, 0.004405748557273936;
  0.1905818169394594, 0.02651752951821827, 0.9813130956429272, -0.2026385150413348]
p train index 1
[1, 0, 0, 0;
  0, 1, 0, 0;
  0, 0, 1, 0]
getalign
triangulate points
Triangulating...Done. (11938points, 1.02729s, mean reproj err = 6.99478)
triangulation reproj error 6.99478
test triangulate
11887/11938 = 99.5728% are in front of camera
11887/11938 = 99.5728% are in front of camera
filtered out 208 high-error points
4535/11730 points were found in other views, adding 7195 new
before triangulation: 9338 after 16533
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 11730 K (measurements) = 23460
intrinsic before bundle = [ 1024 0 512 
0 1024 384 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 23460 valid 2D measurements.
mean reprojection error (in pixels): 7.30053
K0 = [ 1 0 0.5 
0 1 0.375 
0 0 1 ]
optimizer status = 0
refined K = [ 1.14512 0 0.510873 
0 1.14512 0.374177 
0 0 1 ]
Knew = [ 1172.6 0 523.134 
0 1172.6 383.157 
0 0 1 ]
mean reprojection error (in pixels): 0.415218
use new K 
[1172.60060018951, 0, 523.1338713179357;
  0, 1172.60060018951, 383.1570159772803;
  0, 0, 1]
F keeping 12911 / 22170
22170 matches before, 12911 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22170
train frame keypoints: 22600
match size: 12911-----------------------------------------------------------------
found 11005 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 11005
2d point: 11005
inliers size: 4729
projected point: 11005
--------------------------------------------------------------------------
(4729/11005)
found t = [0.1966510647856503; 0.04684598089546448; 0.03625114954611153]
R = 
[0.9961099473159547, -0.00901012151333822, -0.08765723340672323;
  0.007403426542070558, 0.9997989023614522, -0.0186371701787489;
  0.0878075289120588, 0.01791570671646424, 0.9959763377305746]
frame pose [0.9961099473159547, -0.00901012151333822, -0.08765723340672323, 0.1966510647856503;
  0.007403426542070558, 0.9997989023614522, -0.0186371701787489, 0.04684598089546448;
  0.0878075289120588, 0.01791570671646424, 0.9959763377305746, 0.03625114954611153]
begin triangulation
p query index 3
[0.9961099473159547, -0.00901012151333822, -0.08765723340672323, 0.1966510647856503;
  0.007403426542070558, 0.9997989023614522, -0.0186371701787489, 0.04684598089546448;
  0.0878075289120588, 0.01791570671646424, 0.9959763377305746, 0.03625114954611153]
p train index 2
[0.987682841716741, -0.02995766749564885, -0.1535745497683856, 0.3866191331603533;
  0.02581657454590371, 0.9992491884767079, -0.02888881803321454, 0.02405412122922135;
  0.1543246858317164, 0.0245682210764341, 0.9877146824139451, 0.002763003747495454]
getalign
triangulate points
Triangulating...Done. (12911points, 1.11203s, mean reproj err = 0.505621)
triangulation reproj error 0.505621
test triangulate
12830/12911 = 99.3726% are in front of camera
12830/12911 = 99.3726% are in front of camera
filtered out 149 high-error points
11247/12762 points were found in other views, adding 1515 new
before triangulation: 18048 after 19563
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 12762 K (measurements) = 25524
intrinsic before bundle = [ 1172.6 0 523.134 
0 1172.6 383.157 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 25524 valid 2D measurements.
mean reprojection error (in pixels): 1.17972
K0 = [ 1 0 0.446131 
0 1 0.326758 
0 0 1 ]
optimizer status = 0
refined K = [ 0.973752 0 0.275012 
0 0.973752 0.515515 
0 0 1 ]
Knew = [ 1141.82 0 322.479 
0 1141.82 604.494 
0 0 1 ]
mean reprojection error (in pixels): 0.366119
use new K 
[1141.821747838988, 0, 322.478940830128;
  0, 1141.821747838988, 604.4935296205299;
  0, 0, 1]
F keeping 11396 / 20621
20621 matches before, 11396 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 20621
train frame keypoints: 22170
match size: 11396-----------------------------------------------------------------
found 10442 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 10442
2d point: 10442
inliers size: 10183
projected point: 10442
--------------------------------------------------------------------------
(10183/10442)
found t = [0.893499611285185; -0.4185744604393369; -0.03468472365368713]
R = 
[0.9873685736671668, -0.0209466774995289, -0.1570494713018652;
  0.01230166107621841, 0.9983651834366898, -0.05581782543409023;
  0.1579619222130147, 0.05318079731590574, 0.9860120860961158]
frame pose [0.9873685736671668, -0.0209466774995289, -0.1570494713018652, 0.893499611285185;
  0.01230166107621841, 0.9983651834366898, -0.05581782543409023, -0.4185744604393369;
  0.1579619222130147, 0.05318079731590574, 0.9860120860961158, -0.03468472365368713]
begin triangulation
p query index 4
[0.9873685736671668, -0.0209466774995289, -0.1570494713018652, 0.893499611285185;
  0.01230166107621841, 0.9983651834366898, -0.05581782543409023, -0.4185744604393369;
  0.1579619222130147, 0.05318079731590574, 0.9860120860961158, -0.03468472365368713]
p train index 3
[0.9995218023985318, -0.0002844480128931002, -0.03092063419981649, 0.5358843936432602;
  -0.001399147566506125, 0.9985174991976367, -0.05441365804817274, -0.4217946213894322;
  0.03089027219171183, 0.05443090009750243, 0.9980396125397519, -0.03164336094532307]
getalign
triangulate points
Triangulating...Done. (11396points, 0.982484s, mean reproj err = 0.663905)
triangulation reproj error 0.663905
test triangulate
11298/11396 = 99.14% are in front of camera
11298/11396 = 99.14% are in front of camera
filtered out 232 high-error points
10498/11164 points were found in other views, adding 666 new
before triangulation: 20229 after 20895
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 11164 K (measurements) = 22328
intrinsic before bundle = [ 1141.82 0 322.479 
0 1141.82 604.494 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 22328 valid 2D measurements.
mean reprojection error (in pixels): 1.65726
K0 = [ 1 0 0.282425 
0 1 0.529411 
0 0 1 ]
optimizer status = 0
refined K = [ 1.06142 0 0.239217 
0 1.06142 0.514013 
0 0 1 ]
Knew = [ 1211.95 0 273.144 
0 1211.95 586.911 
0 0 1 ]
mean reprojection error (in pixels): 0.354916
use new K 
[1211.953081859451, 0, 273.1435706200949;
  0, 1211.953081859451, 586.9107989116344;
  0, 0, 1]
F keeping 13640 / 22138
22138 matches before, 13640 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22138
train frame keypoints: 20621
match size: 13640-----------------------------------------------------------------
found 10619 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 10619
2d point: 10619
inliers size: 10330
projected point: 10619
--------------------------------------------------------------------------
(10330/10619)
found t = [1.087684592407168; -0.3331604397775342; -0.1216116525244781]
R = 
[0.9802046001118718, -0.02221494045183785, -0.1967369775620404;
  0.01292717994567881, 0.9987459196076766, -0.04836813088872161;
  0.1975647487234945, 0.04486741008502457, 0.9792625212751097]
frame pose [0.9802046001118718, -0.02221494045183785, -0.1967369775620404, 1.087684592407168;
  0.01292717994567881, 0.9987459196076766, -0.04836813088872161, -0.3331604397775342;
  0.1975647487234945, 0.04486741008502457, 0.9792625212751097, -0.1216116525244781]
begin triangulation
p query index 5
[0.9802046001118718, -0.02221494045183785, -0.1967369775620404, 1.087684592407168;
  0.01292717994567881, 0.9987459196076766, -0.04836813088872161, -0.3331604397775342;
  0.1975647487234945, 0.04486741008502457, 0.9792625212751097, -0.1216116525244781]
p train index 4
[0.9887864010792689, -0.02209932704863582, -0.1476924940025854, 0.9376749005201703;
  0.01447790069938375, 0.9985169847959423, -0.05248067706650546, -0.3316768196448001;
  0.1486332514346809, 0.04975390254057953, 0.9876399676754364, -0.1267665045442036]
getalign
triangulate points
Triangulating...Done. (13640points, 1.17619s, mean reproj err = 0.639548)
triangulation reproj error 0.639548
test triangulate
13554/13640 = 99.3695% are in front of camera
13554/13640 = 99.3695% are in front of camera
filtered out 191 high-error points
11261/13449 points were found in other views, adding 2188 new
before triangulation: 23083 after 25271
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 13449 K (measurements) = 26898
intrinsic before bundle = [ 1211.95 0 273.144 
0 1211.95 586.911 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 26898 valid 2D measurements.
mean reprojection error (in pixels): 1.58543
K0 = [ 1 0 0.225375 
0 1 0.484269 
0 0 1 ]
optimizer status = 0
refined K = [ 0.948136 0 0.251687 
0 0.948136 0.446686 
0 0 1 ]
Knew = [ 1149.1 0 305.033 
0 1149.1 541.362 
0 0 1 ]
mean reprojection error (in pixels): 0.348343
use new K 
[1149.096719046845, 0, 305.0330435875991;
  0, 1149.096719046845, 541.3623487982828;
  0, 0, 1]
F keeping 14729 / 22551
22551 matches before, 14729 new matches after Fundamental Matrix
-----------------------------------------------------------------
find 2d 3d correspondences
query frame keypoints: 22551
train frame keypoints: 22138
match size: 14729-----------------------------------------------------------------
found 12841 3d-2d point correspondences
-------------------------------------------------------------------------
find pose estimation
3d point: 12841
2d point: 12841
inliers size: 11844
projected point: 12841
--------------------------------------------------------------------------
(11844/12841)
found t = [1.172557780113592; -0.1978834416775774; -0.2993834921333005]
R = 
[0.9680442547570303, -0.05812215873170952, -0.2439510924268873;
  0.05154123304472333, 0.9981162267670338, -0.03327910997260251;
  0.2454257976010983, 0.01964211110611621, 0.9692163666298458]
frame pose [0.9680442547570303, -0.05812215873170952, -0.2439510924268873, 1.172557780113592;
  0.05154123304472333, 0.9981162267670338, -0.03327910997260251, -0.1978834416775774;
  0.2454257976010983, 0.01964211110611621, 0.9692163666298458, -0.2993834921333005]
begin triangulation
p query index 6
[0.9680442547570303, -0.05812215873170952, -0.2439510924268873, 1.172557780113592;
  0.05154123304472333, 0.9981162267670338, -0.03327910997260251, -0.1978834416775774;
  0.2454257976010983, 0.01964211110611621, 0.9692163666298458, -0.2993834921333005]
p train index 5
[0.9793600933070897, -0.02454262354521569, -0.2006276832021096, 1.018934809259292;
  0.01605980174709015, 0.9989112111121381, -0.0438004004813442, -0.2310949062720133;
  0.2014842187501854, 0.03967432348509341, 0.9786879265887711, -0.3122528685126037]
getalign
triangulate points
Triangulating...Done. (14729points, 1.27074s, mean reproj err = 0.560875)
triangulation reproj error 0.560875
test triangulate
14647/14729 = 99.4433% are in front of camera
14647/14729 = 99.4433% are in front of camera
filtered out 120 high-error points
13125/14609 points were found in other views, adding 1484 new
before triangulation: 26755 after 28239
======================== Bundle Adjustment ==========================
N (cams) = 2 M (points) = 14609 K (measurements) = 29218
intrinsic before bundle = [ 1149.1 0 305.033 
0 1149.1 541.362 
0 0 1 ]
Read the 3D points.
Read the cameras.
Read 29218 valid 2D measurements.
mean reprojection error (in pixels): 2.04565
K0 = [ 1 0 0.265455 
0 1 0.47112 
0 0 1 ]
optimizer status = 0
refined K = [ 0.846273 0 0.320862 
0 0.846273 0.438829 
0 0 1 ]
Knew = [ 972.449 0 368.702 
0 972.449 504.258 
0 0 1 ]
mean reprojection error (in pixels): 0.386985
use new K 
[972.449270138991, 0, 368.702034185574;
  0, 972.449270138991, 504.2575003744824;
  0, 0, 1]
